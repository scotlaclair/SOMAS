# SOMAS Configuration
# @copilot-context: Main configuration for Self-Sovereign Orchestrated Multi-Agent System
# This file defines the 11-stage Neurology-inspired pipeline, AI agent providers, and optimization settings
# Energy, Frequency, Vibration, Sound - autonomous, self-healing SOMAS
# @copilot-review: Verify security settings when modifying agent configurations

version: "1.0.0"
name: "Self-Sovereign Orchestrated Multi-Agent System"
description: "Configuration for AI-driven software development pipeline"

# Pipeline Stages - 11-Stage Neurology-Inspired Architecture

pipeline:
  stages:
    - id: "signal"
      order: 1
      code_name: "SIGNAL"
      description: "Intake - Catch the initial request"
      enabled: true
      agent: "planner"
      human_gate: false
      auto_proceed: true
      timeout_hours: 2
      
    - id: "design"
      order: 2
      code_name: "DESIGN"
      description: "Specify - Expand into requirements"
      enabled: true
      agent: "specifier"
      human_gate: false
      timeout_hours: 24
      
    - id: "grid"
      order: 3
      code_name: "GRID"
      description: "Plan - Map components & strategy"
      enabled: true
      agent: "simulator"
      human_gate: false
      auto_proceed: true
      timeout_hours: 2
      feedback_loop_enabled: true
      max_feedback_iterations: 3
      
    - id: "line"
      order: 4
      code_name: "LINE"
      description: "Decompose - Break into atomic tasks"
      enabled: true
      agent: "decomposer"
      human_gate: false
      auto_proceed: true
      timeout_hours: 4
      
    - id: "mcp"
      order: 5
      code_name: "MCP"
      description: "Implement - Generate code via AI agents"
      enabled: true
      agent: "coder"
      human_gate: false
      auto_proceed: true
      timeout_hours: 48
      execution_mode: "single_shot"
      
    - id: "pulse"
      order: 6
      code_name: "PULSE"
      description: "Verify - Run tests, check heartbeat"
      enabled: true
      agent: "validator"
      human_gate: false
      auto_proceed: true
      timeout_hours: 12
      max_retries: 3
      
    - id: "synapse"
      order: 7
      code_name: "SYNAPSE"
      description: "Integrate - Connect & merge"
      enabled: true
      agent: "merger"
      human_gate: false
      auto_proceed: true
      timeout_hours: 8
      
    - id: "overload"
      order: 8
      code_name: "OVERLOAD"
      description: "Harden - Stress test & document"
      enabled: true
      agent: "tester"
      human_gate: false
      auto_proceed: true
      timeout_hours: 16
      
    - id: "velocity"
      order: 9
      code_name: "VELOCITY"
      description: "Release - Deploy at speed"
      enabled: true
      agent: "deployer"
      human_gate: false
      timeout_hours: 24
      auto_merge_to_dev: true
      
    - id: "vibe"
      order: 10
      code_name: "VIBE"
      description: "Operate - Monitor SLOs"
      enabled: true
      agent: "operator"
      human_gate: false
      auto_proceed: true
      timeout_hours: 8
      
    - id: "whole"
      order: 11
      code_name: "WHOLE"
      description: "Learn - Analyze & loop back"
      enabled: true
      agent: "analyzer"
      human_gate: false
      auto_proceed: true
      timeout_hours: 4

# Environment Configuration
# @copilot-context: Defines behavior for dev vs prod environments

environments:
  dev:
    branch_pattern: "somas/*"
    auto_proceed: true          # Autonomous execution, no human gates
    human_gates: []             # Zero human intervention in dev
    auto_merge: true            # Auto-merge to dev branch on success
    
  prod:
    branch_pattern: "main"
    human_gates: ["production_deployment"]
    require_approval_from: ["@scotlaclair"]
    auto_merge: false           # Manual merge to production

# Execution Configuration
# @copilot-context: Single-project proof-of-concept mode

execution:
  mode: "single_project_sequential"
  concurrent_projects: 1        # Proof of concept - one project at a time
  
  focus:
    - quality_over_cost         # Cost is fixed at $10/month subscription
    - comprehensive_logging     # Prove the concept works
    - metric_collection         # Show value
  
  optimization_goals:
    primary: "minimize_human_time"
    secondary: "maximize_quality"
    tertiary: "maximize_autonomy"

# Limits Configuration
# @copilot-context: Simplified for single-project mode

limits:
  # No API rate limiting needed (single project, unlimited subscription)
  api_calls: none
  
  # Standard iteration limits
  iterations:
    per_stage: 3
    per_feedback_loop: 2
    per_project: 8
  
  # GitHub Actions limits
  workflow_runtime_mins: 300
  
# Checkpoint and Recovery Configuration
# @copilot-context: Enhanced checkpointing for long-running autonomous pipelines
# Enables resuming failed pipelines from the last successful checkpoint
# Uses GitHub Artifacts for state persistence

checkpointing:
  enabled: true
  storage: "github_artifacts"
  frequency: "per_stage"
  
  # Checkpoint content
  save_state:
    - "project_metadata"
    - "stage_outputs"
    - "execution_context"
    - "agent_decisions"
    - "quality_metrics"
  
  # Retention
  retention:
    completed_pipelines_days: 30
    failed_pipelines_days: 90
    artifact_compression: true
  
  # Recovery behavior
  recovery:
    auto_resume: true
    max_resume_attempts: 3
    resume_strategy: "from_last_checkpoint"
    
    # Validate state before resuming
    validate_checkpoint:
      enabled: true
      fail_on_corruption: true
      
    # Retry failed stages
    retry_failed_stage:
      enabled: true
      max_retries: 2
      backoff_minutes: 5

# State Manager Configuration
# @copilot-context: Controls state.json checkpoint rotation to prevent unbounded growth
# Keeps only the N most recent checkpoints to avoid performance degradation

state_manager:
  max_checkpoints: 20  # Number of checkpoints to retain (oldest are pruned)

# Agent Configuration
# @copilot-delegate: Agent configurations define AI provider mappings
# Updated 2026 Frontier Tier models for optimal performance:
# - GPT-5.2-Codex: SOTA coding agent for implementation
# - Claude Opus 4.5: Deepest reasoning for architecture
# - Claude Sonnet 4.5: Balanced power for code review and testing
# - GPT-5.2: General intelligence for requirements and security
# - Gemini 3 Pro: Multimodal & long context for documentation
# - Grok Code Fast 1: Low latency for orchestration

agents:
  providers:
    # Specialized Codex models for implementation
    gpt_5_2_codex:
      model: "gpt-5.2-codex"
      temperature: 0.3
      max_tokens: 8000
      description: "SOTA coding agent optimized for agentic loops"
      
    gpt_5_1_codex:
      model: "gpt-5.1-codex"
      temperature: 0.3
      max_tokens: 8000
      description: "Stable implementation agent"
      
    gpt_5_1_codex_max:
      model: "gpt-5.1-codex-max"
      temperature: 0.3
      max_tokens: 16000
      description: "Massive context for large-scale refactors"
      
    # Claude Opus models for deep reasoning
    claude_opus_4_5:
      model: "claude-opus-4.5"
      temperature: 0.7
      max_tokens: 8000
      description: "Deepest reasoning for architecture and design"
      
    claude_opus_4_1:
      model: "claude-opus-4.1"
      temperature: 0.7
      max_tokens: 8000
      description: "High reasoning for reviews"
      
    # Claude Sonnet models for balanced tasks
    claude_sonnet_4_5:
      model: "claude-sonnet-4.5"
      temperature: 0.5
      max_tokens: 8000
      description: "Balanced power for testing and review"
      
    claude_haiku_4_5:
      model: "claude-haiku-4.5"
      temperature: 0.4
      max_tokens: 4000
      description: "Smart and fast for debugging"
      
    # GPT-5 series for general intelligence
    gpt_5_2:
      model: "gpt-5.2"
      temperature: 0.7
      max_tokens: 8000
      description: "Best all-rounder for requirements and security"
      
    gpt_5_1:
      model: "gpt-5.1"
      temperature: 0.7
      max_tokens: 8000
      description: "Standard intelligence for general tasks"
      
    gpt_5_mini:
      model: "gpt-5-mini"
      temperature: 0.4
      max_tokens: 4000
      description: "Efficient reasoning for simple logic"
      
    # Gemini models for multimodal and long context
    gemini_3_pro:
      model: "gemini-3-pro"
      temperature: 0.5
      max_tokens: 32000
      description: "Multimodal & long context for comprehensive documentation"
      
    gemini_2_5_pro:
      model: "gemini-2.5-pro"
      temperature: 0.5
      max_tokens: 16000
      description: "Legacy long-context librarian"
      
    gemini_3_flash:
      model: "gemini-3-flash"
      temperature: 0.4
      max_tokens: 8000
      description: "High volume data processing"
      
    # Grok for speed
    grok_code_fast_1:
      model: "grok-code-fast-1"
      temperature: 0.3
      max_tokens: 4000
      description: "Lowest latency for orchestration and routing"
      
    # Legacy models (kept for fallback)
    codex:
      model: "gpt-4"
      temperature: 0.7
      max_tokens: 4000
      description: "Legacy fallback"
      
    gemini:
      model: "gemini-pro"
      temperature: 0.5
      max_tokens: 8000
      description: "Legacy fallback"
      
    copilot:
      model: "gpt-4"
      temperature: 0.3
      max_tokens: 4000
      description: "Legacy fallback"
      
  agent_configs:
    planner:
      provider: "gpt_5_2"
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/planner.yml"
      description: "Requirements analysis with general intelligence"
      
    specifier:
      provider: "claude_sonnet_4_5"  # Changed from gpt_5_2 for SWE-bench #1 coding
      fallback: "claude_opus_4_5"
      config_file: ".somas/agents/specifier.yml"
      description: "Specification with coding-optimized intelligence"
      
    simulator:
      provider: "claude_sonnet_4_5"  # Changed from gpt_5_2 for better coding analysis
      fallback: "grok_code_fast_1"
      config_file: ".somas/agents/simulator.yml"
      description: "Simulation planning with coding intelligence"
      
    architect:
      provider: "claude_opus_4_5"
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/architect.yml"
      description: "System design with deepest reasoning"
      
    implementer:
      provider: "claude_sonnet_4_5"  # Changed from gpt_5_2_codex for SWE-bench #1
      fallback: "grok_code_fast_1"
      config_file: ".somas/agents/implementer.yml"
      description: "Code generation with #1 coding model"
      
    coder:
      provider: "claude_sonnet_4_5"  # Changed from gpt_5_2_codex for consistency
      fallback: "grok_code_fast_1"
      config_file: ".somas/agents/coder.yml"
      description: "Code generation with #1 coding model"
      
    reviewer:
      provider: "claude_sonnet_4_5"
      fallback: "claude_opus_4_5"
      config_file: ".somas/agents/reviewer.yml"
      description: "Code review with balanced power"
      
    security:
      provider: "gpt_5_2"
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/security.yml"
      description: "Security analysis with adversarial creativity"
      
    tester:
      provider: "claude_sonnet_4_5"
      fallback: "grok_code_fast_1"
      config_file: ".somas/agents/tester.yml"
      description: "Testing with balanced power"
      
    documenter:
      provider: "gemini_3_pro"
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/documenter.yml"
      description: "Documentation with massive context window"
      
    orchestrator:
      provider: "grok_code_fast_1"
      fallback: "claude_haiku_4_5"
      config_file: ".somas/agents/orchestrator.yml"
      description: "Pipeline coordination with low latency"
      
    validator:
      provider: "claude_sonnet_4_5"
      fallback: "grok_code_fast_1"
      config_file: ".somas/agents/validator.yml"
      description: "Validation with balanced power"
      
    deployer:
      provider: "claude_opus_4_5"
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/deployer.yml"
      description: "Deployment planning with deep reasoning"
      
    advisor:
      provider: "claude_opus_4_5"  # For APO task complexity analysis
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/advisor.yml"
      description: "Strategic analysis and recommendations"
      
    triage:
      provider: "grok_code_fast_1"  # Fast model for quick classification
      fallback: "claude_haiku_4_5"
      config_file: ".somas/agents/triage.yml"
      description: "Request triage and routing with low latency"
      
    decomposer:
      provider: "claude_sonnet_4_5"
      fallback: "gpt_5_2"
      config_file: ".somas/agents/decomposer.yml"
      description: "Task decomposition with coding intelligence"
      
    merger:
      provider: "claude_sonnet_4_5"
      fallback: "grok_code_fast_1"
      config_file: ".somas/agents/merger.yml"
      description: "Code integration and merge conflict resolution"
      
    operator:
      provider: "gemini_3_pro"
      fallback: "claude_sonnet_4_5"
      config_file: ".somas/agents/operator.yml"
      description: "Operational monitoring and SLO tracking"
      
    analyzer:
      provider: "claude_opus_4_5"
      fallback: "gemini_3_pro"
      config_file: ".somas/agents/analyzer.yml"
      description: "Post-mortem analysis and learning loop"

# Optimization Configuration

optimization:
  simulation:
    enabled: true
    method: "monte_carlo"
    iterations: 1000
    confidence_interval: 0.90
    rerun_on_spec_change: true
    save_intermediate_results: true
    
  parallelization:
    enabled: true
    max_concurrent_tasks: 5
    respect_dependencies: true
    load_balancing_strategy: "duration_based"
    
  adaptive_sizing:
    enabled: true
    target_task_duration_minutes: 240  # 4 hours
    max_task_duration_minutes: 480    # 8 hours
    min_task_duration_minutes: 60     # 1 hour
    max_lines_per_task: 100
    auto_decompose: true
    decomposition_strategy: "feature_boundary"
    
  task_prioritization:
    enabled: true
    strategy: "critical_path_first"
    consider_risk: true
    consider_dependencies: true
    
  risk_multipliers:
    external_dependencies: 1.5
    new_technology: 2.0
    high_complexity: 1.8
    integration_heavy: 1.7

# Project Management Integration

project_management:
  enabled: true
  
  github_project:
    create_per_pipeline: true
    template: "SOMAS Pipeline"
    template_file: ".github/project-template.yml"
    auto_archive_on_completion: false
    
    # Note: Column definitions are in .github/project-template.yml to maintain single source of truth
        
    task_decomposition:
      create_issues_for: "each_component"
      link_to_parent: true
      auto_assign_labels: true
      assign_from_execution_plan: true
      
    metrics_tracked:
      - "time_in_stage"
      - "iteration_count"
      - "blocker_duration"
      - "human_wait_time"
      - "estimation_accuracy"
      
  notifications:
    enabled: true
    channels:
      - "github_issue_comments"
      - "github_notifications"
    
    notify_on:
      - "stage_completed"
      - "human_gate_opened"
      - "error_occurred"
      - "pipeline_completed"
      - "high_risk_task_started"
    
    mention_owner: true
    owner: "@scotlaclair"

# Analytics & Learning

analytics:
  enabled: true
  storage: ".somas/analytics/runs/"
  schema_file: ".somas/analytics/schema.yml"
  retention_days: 90
  
  track:
    - "task_duration_vs_estimate"
    - "iteration_count_by_task_type"
    - "parallel_efficiency"
    - "critical_path_accuracy"
    - "human_intervention_frequency"
    
  export:
    enabled: true
    formats: ["json", "csv"]
    schedule: "weekly"
    
  dashboards:
    enabled: true
    provider: "github_actions_summary"
    update_frequency: "per_stage"
    include_metrics:
      - "pipeline_progress"
      - "stage_duration"
      - "task_completion_rate"
      - "quality_scores"
      - "error_rates"

learning:
  enabled: true
  record_all_runs: true
  update_estimates_from_actuals: true
  pattern_extraction: true
  
  models:
    duration_estimation:
      enabled: true
      algorithm: "gradient_boosting"
      min_training_samples: 50
      retrain_frequency: "weekly"
      
    critical_path_prediction:
      enabled: true
      algorithm: "random_forest"
      min_training_samples: 100
      retrain_frequency: "weekly"
      
  feedback_loop:
    enabled: true
    incorporate_human_feedback: true
    adjust_risk_thresholds: true
    update_decomposition_rules: true

# Quality Gates

quality_gates:
  specification:
    - "All requirements have unique IDs"
    - "All requirements are testable"
    - "No ambiguous language (TBD, maybe, etc.)"
    - "Open questions resolved or escalated"
    - "Security requirements defined"
    
  simulation:
    - "Task graph is acyclic"
    - "All tasks have duration estimates"
    - "Critical path identified"
    - "Parallelization opportunities documented"
    
  architecture:
    - "All components defined"
    - "Interfaces specified"
    - "Data flows documented"
    - "Technology choices justified"
    
  implementation:
    - "All tests passing"
    - "Code coverage > 80%"
    - "No critical security vulnerabilities"
    - "Documentation complete"
    
  validation:
    - "All acceptance criteria met"
    - "Performance requirements satisfied"
    - "Security scan passed"
    - "Integration tests passing"

# Artifact Management

artifacts:
  storage: "projects/{project_id}/artifacts/"
  
  types:
    specification:
      - "SPEC.md"
      - "requirements.yml"
      
    simulation:
      - "execution_plan.yml"
      - "task_graph.yml"
      - "simulation_results.json"
      
    architecture:
      - "ARCHITECTURE.md"
      - "api_specs.yml"
      - "data_models.yml"
      
    implementation:
      - "source_code/"
      - "tests/"
      - "documentation/"
      
    validation:
      - "test_results.json"
      - "coverage_report.html"
      - "security_scan.json"
      
  retention:
    active_projects: "indefinite"
    completed_projects: 365  # days
    failed_projects: 180  # days
    
  versioning:
    enabled: true
    strategy: "git_based"

# Security

security:
  secrets_management:
    provider: "github_secrets"
    required_secrets:
      - "GITHUB_TOKEN"
      - "AI_API_KEY"
      
  code_scanning:
    enabled: true
    tools:
      - "codeql"
      - "dependabot"
      
  vulnerability_management:
    fail_on_critical: true
    auto_fix_enabled: true
    
  access_control:
    require_approval_for:
      - "specification"
      - "staging"
    approvers:
      - "@scotlaclair"
      # Note: Consider using GitHub teams for better team management:
      # - "@org-name/approvers-team"
      # This avoids hardcoding individual usernames

# Error Handling

error_handling:
  retry_strategy:
    max_attempts: 3
    backoff_strategy: "exponential"
    base_delay_seconds: 60
    
  fallback_agents:
    gpt_5_2_codex: "gpt_5_1_codex"
    gpt_5_1_codex: "claude_opus_4_5"
    claude_opus_4_5: "claude_opus_4_1"
    claude_opus_4_1: "gpt_5_2"
    claude_sonnet_4_5: "claude_haiku_4_5"
    gpt_5_2: "gpt_5_1"
    gemini_3_pro: "gemini_2_5_pro"
    grok_code_fast_1: "gpt_5_mini"
    # Legacy fallbacks
    codex: "gemini"
    gemini: "copilot"
    
  escalation:
    enabled: true
    notify_on_failure: true
    create_issue_on_failure: true

# Monitoring

monitoring:
  health_checks:
    enabled: true
    interval_minutes: 5
    
  metrics:
    - "pipeline_duration"
    - "stage_duration"
    - "task_duration"
    - "error_rate"
    - "human_intervention_rate"
    
  alerts:
    enabled: true
    thresholds:
      pipeline_duration_hours: 168  # 1 week
      error_rate_percent: 20
      human_wait_time_hours: 48

# Development

development:
  debug_mode: false
  verbose_logging: true
  save_intermediate_states: true
  
  testing:
    dry_run_mode: false
    mock_ai_responses: false
    skip_human_gates: false

# Documentation

documentation:
  auto_generate: true
  formats:
    - "markdown"
    - "html"
    
  include:
    - "pipeline_overview"
    - "agent_descriptions"
    - "quality_gates"
    - "optimization_results"
    
  output_path: "docs/somas/"

# APO (Autonomous Prompt Optimization)
# @copilot-context: Cognitive enhancement layer for all SOMAS agents
# APO enables agents to self-select optimal mental models for any task

apo:
  enabled: true
  version: "1.0.0"
  
  # Core Configuration
  
  auto_model_selection: true  # Automatically select mental models via task analyzer
  require_reasoning_trail: true  # Agents must document their reasoning process
  verification_required: true  # Quality verification mandatory before finalizing
  max_iterations: 3  # Maximum quality loop iterations before escalation
  
  # Mental Models Library
  
  mental_models:
    enabled_models:
      - "first_principles"
      - "inversion"
      - "second_order_thinking"
      - "ooda_loop"
      - "occams_razor"
      - "six_thinking_hats"
      - "tree_of_thoughts"
    
    library_path: ".somas/apo/mental-models.yml"
    
    # Agent-specific model preferences (overrides for specific stages)
    agent_preferences:
      specifier:
        prefer: ["inversion", "second_order_thinking"]
        avoid: []
      
      simulator:
        prefer: ["tree_of_thoughts", "ooda_loop"]
        avoid: []
      
      architect:
        prefer: ["first_principles", "occams_razor"]
        avoid: []
      
      coder:
        prefer: ["ooda_loop", "occams_razor"]
        avoid: ["tree_of_thoughts"]  # Too heavy for implementation
      
      validator:
        prefer: ["inversion", "six_thinking_hats"]
        avoid: []
  
  # Task Analysis
  
  task_analyzer:
    enabled: true
    config_path: ".somas/apo/task-analyzer.yml"
    
    # Use APO for moderate+ complexity only
    minimum_complexity_for_apo: 2.0
    
    complexity_thresholds:
      simple: 2.0
      moderate: 3.5
      complex: 5.0
    
    # Auto-routing based on complexity
    auto_routing:
      enabled: true
      rules:
        - complexity: "> 3.5"
          model: "claude_opus_4_5"
          chain: "draft_critique_refine"
        - complexity: "2.0-3.5"
          model: "claude_sonnet_4_5"
          chain: "sequential"
        - complexity: "< 2.0"
          model: "grok_code_fast_1"
          chain: "sequential"
    
    domain_detection:
      confidence_threshold: 0.7  # Minimum confidence for automatic classification
      fallback_domain: "technical"
    
    risk_factors:
      security_risk_multiplier: 2.5
      external_dependency_multiplier: 1.5
      novel_technology_multiplier: 2.0
  
  # Chain Strategies
  
  chains:
    enabled: true
    chains_path: ".somas/apo/chains/"
    
    available_strategies:
      - "sequential"
      - "collision"
      - "draft_critique_refine"
      - "parallel_synthesis"
      - "strategic_diamond"
    
    default_strategy: "sequential"
    
    # Strategy selection rules
    auto_select_strategy: true
    strategy_rules:
      high_ambiguity: "collision"
      multiple_options: "strategic_diamond"
      quality_critical: "draft_critique_refine"
      exploration_needed: "parallel_synthesis"
  
  # Base Prompt
  
  base_prompt:
    enabled: true
    config_path: ".somas/apo/base-prompt.yml"
    injection_method: "prepend"  # Prepend to all agent prompts
    override_allowed: false  # Agents cannot disable APO
    
    anti_early_answering:
      enabled: true
      enforce_task_analysis: true
      require_alternatives_consideration: true
      minimum_reasoning_depth: 2  # At least 2 levels of "why"
  
  # Quality & Verification
  
  quality:
    verification_checklist:
      - "completeness"
      - "correctness"
      - "clarity"
      - "quality"
      - "alignment"
      - "actionability"
    
    quality_loop:
      enabled: true
      max_iterations: 3
      escalate_after_max: true
      
      escalation_criteria:
        - "Unresolvable ambiguity"
        - "Multiple valid solutions with no clear winner"
        - "Risk exceeds agent authority"
        - "Conflicting requirements"
        - "Novel problem outside knowledge"
    
    output_requirements:
      include_task_analysis: true
      include_reasoning_process: true
      include_verification_results: true
      include_confidence_level: true
      include_assumptions: true
      include_uncertainties: true
  
  # Performance Optimization
  
  performance:
    time_budgets:
      simple_tasks_minutes: 10
      moderate_tasks_minutes: 30
      complex_tasks_minutes: 90
      novel_tasks_minutes: 240
    
    efficiency_mode:
      enabled: true
      match_reasoning_depth_to_complexity: true
      cache_similar_analyses: true
      reuse_patterns: true
  
  # Monitoring & Analytics
  
  monitoring:
    enabled: true
    storage_path: ".somas/analytics/apo/"
    
    track_metrics:
      - "model_selection_patterns"
      - "task_completion_success_rate"
      - "average_task_duration_by_model"
      - "quality_scores_by_model"
      - "verification_pass_fail_rates"
      - "iteration_counts"
      - "chain_strategy_effectiveness"
    
    learning:
      enabled: true
      update_model_selection_weights: true
      learn_from_failures: true
      adjust_complexity_thresholds: true
      min_samples_for_learning: 50
  
  # Integration
  
  integration:
    inject_into_all_agents: true
    
    stage_specific_config:
      ideation:
        primary_models: ["tree_of_thoughts", "first_principles"]
        chain: "strategic_diamond"
      
      specification:
        primary_models: ["inversion", "second_order_thinking"]
        chain: "collision"
      
      simulation:
        primary_models: ["tree_of_thoughts", "ooda_loop"]
        chain: "sequential"
      
      architecture:
        primary_models: ["first_principles", "occams_razor"]
        chain: "strategic_diamond"
      
      implementation:
        primary_models: ["ooda_loop", "occams_razor"]
        chain: "sequential"
      
      validation:
        primary_models: ["inversion", "six_thinking_hats"]
        chain: "collision"
      
      staging:
        primary_models: ["second_order_thinking", "inversion"]
        chain: "draft_critique_refine"
  
  # Documentation
  
  documentation:
    guide_path: "docs/somas/apo-guide.md"
    examples_included: true
    troubleshooting_included: true
